<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Soru Sor | ≈ûahin Ehliyet</title>

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1813888095277705"
     crossorigin="anonymous"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>

/* ================= RESET ================= */

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Segoe UI,system-ui;
}

/* ================= THEME ================= */

:root{
--bg:#f4f6fb;
--card:#ffffff;
--text:#111827;
--primary:#2563eb;
--accent:#3b82f6;
--shadow:0 15px 40px rgba(0,0,0,.1);
}

body.dark{
--bg:#020617;
--card:#020617;
--text:#e5e7eb;
--shadow:0 15px 40px rgba(0,0,0,.6);
}

/* ================= BODY ================= */

body{
background:var(--bg);
color:var(--text);
min-height:100vh;
padding-top: env(safe-area-inset-top);
}

/* ================= HEADER ================= */

.app-header{
background:linear-gradient(135deg,#2563eb,#3b82f6);
color:white;

padding:16px 18px;

display:flex;
align-items:center;
justify-content:space-between;

border-radius:0 0 25px 25px;
box-shadow:var(--shadow);
}

.app-title{
font-size:18px;
font-weight:600;
letter-spacing:.3px;
}

.back-btn{
background:none;
border:none;
color:white;
font-size:20px;
cursor:pointer;
}

/* ================= CONTAINER ================= */

.container{
padding:18px;
max-width:720px;
margin:auto;
}

/* ================= ASK CARD ================= */

.ask-card{
background:var(--card);
border-radius:25px;
padding:24px;
margin-bottom:30px;

box-shadow:var(--shadow);

animation:cardIn .8s ease;
}

@keyframes cardIn{
from{opacity:0;transform:translateY(40px) scale(.95);}
to{opacity:1;transform:none;}
}

.ask-title{
text-align:center;
font-size:20px;
font-weight:700;
margin-bottom:5px;
}

.ask-desc{
text-align:center;
font-size:13px;
opacity:.7;
margin-bottom:18px;
}

/* INPUT */

.ask-card textarea{
width:100%;
min-height:110px;

border:none;
border-radius:18px;

padding:14px;

background:#f1f5f9;

font-size:15px;
outline:none;

transition:.3s;
}

body.dark textarea{
background:#020617;
color:white;
}

.ask-card textarea:focus{
box-shadow:0 0 0 3px rgba(37,99,235,.3);
}

/* BUTTON */

.ask-card button{
width:100%;
margin-top:14px;

background:linear-gradient(135deg,#2563eb,#3b82f6);

border:none;
color:white;

padding:14px;

border-radius:18px;

font-size:15px;
font-weight:600;

cursor:pointer;

transition:.3s;
}

.ask-card button:hover{
transform:translateY(-2px);
box-shadow:0 8px 20px rgba(59,130,246,.5);
}

.ask-card button:active{
transform:scale(.95);
}

/* ================= FAQ ================= */

.faq-card{
background:var(--card);
border-radius:25px;
padding:24px;

box-shadow:var(--shadow);

animation:cardIn 1s ease;
}

.faq-title{
text-align:center;
font-size:20px;
font-weight:700;
margin-bottom:18px;
}

/* ITEM */

.faq-item{
background:#f8fafc;
border-radius:18px;

padding:14px 16px;
margin-bottom:12px;

cursor:pointer;

transition:.3s;
}

body.dark .faq-item{
background:#020617;
}

/* HOVER */

.faq-item:hover{
transform:scale(1.02);
}

/* QUESTION */

.faq-q{
display:flex;
justify-content:space-between;
align-items:center;

font-weight:600;
font-size:15px;
}

/* ANSWER */

.faq-a{
max-height:0;
overflow:hidden;

font-size:14px;
line-height:1.6;

opacity:.85;

transition:.4s;
margin-top:6px;
}

.faq-item.active .faq-a{
max-height:250px;
}

/* ================= POPUP ================= */

.modal{
position:fixed;
inset:0;

background:rgba(0,0,0,.6);

display:none;
align-items:center;
justify-content:center;

z-index:999;
}

.modal.active{
display:flex;
animation:fade .3s;
}

@keyframes fade{
from{opacity:0;}
to{opacity:1;}
}

.modal-box{
background:var(--card);
padding:28px 24px;

border-radius:25px;
width:90%;
max-width:320px;

text-align:center;

animation:pop .4s ease;
}

@keyframes pop{
from{transform:scale(.7);opacity:0;}
to{transform:scale(1);opacity:1;}
}

.modal-box i{
font-size:42px;
color:#22c55e;
margin-bottom:12px;
}

.modal-box h3{
margin-bottom:6px;
}

.modal-box p{
font-size:13px;
opacity:.7;
margin-bottom:14px;
}

.modal-box button{
background:#2563eb;
color:white;
border:none;

padding:10px 18px;
border-radius:14px;

cursor:pointer;
}

/* ================= MOBILE ================= */

@media(max-width:600px){

.ask-title,
.faq-title{
font-size:18px;
}

}


.ask-card textarea{
  font-size:16px;
  resize:none;      /* Kullanƒ±cƒ± b√ºy√ºtemez */
  max-height:120px; /* √áok uzamasƒ±n */
  overflow-y:auto;  /* ƒ∞√ßinde scroll olsun */
}

.form-error{
  display:none;
  background:#fee2e2;
  color:#b91c1c;
  padding:10px 14px;
  border-radius:10px;
  font-size:13px;
  margin-top:8px;
  animation:shake .3s;
}

@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  75%{transform:translateX(-4px)}
  100%{transform:translateX(0)}
}


.my-questions{
  margin-top:30px;
}

.my-questions h3{
  font-size:18px;
  margin-bottom:12px;
}

.question-item{
  background:var(--card);
  padding:14px;
  border-radius:14px;
  box-shadow:var(--shadow);
  margin-bottom:12px;
  animation:fadeUp .4s;
}

.question-item p{
  margin:6px 0;
  font-size:14px;
}

.answer{
  margin-top:8px;
  padding:10px;
  background:#ecfeff;
  border-radius:10px;
  color:#0369a1;
  font-size:13px;
}

@keyframes fadeUp{
  from{opacity:0; transform:translateY(10px)}
  to{opacity:1; transform:translateY(0)}
}



.popup{
  position:fixed;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  background:#16a34a;
  color:white;
  padding:12px 22px;
  border-radius:25px;
  font-size:14px;
  display:none;
  animation:pop .4s;
}

@keyframes pop{
  from{transform:translateX(-50%) scale(.7);opacity:0}
  to{transform:translateX(-50%) scale(1);opacity:1}
}


/* ===== INFO BOX ===== */

.info-box{
  background:linear-gradient(135deg,#2563eb,#3b82f6);
  color:white;
  padding:18px;
  border-radius:22px;
  text-align:center;
  font-weight:600;
  margin-bottom:15px;
  box-shadow:0 8px 25px rgba(37,99,235,.4);
  animation:float 3s infinite ease-in-out;
}

.info-box small{
  display:block;
  font-size:12px;
  opacity:.8;
  margin-top:4px;
}

@keyframes float{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}


/* ===== QUOTA ===== */

.quota-box{
  background:#ecfeff;
  color:#0369a1;
  padding:10px 14px;
  border-radius:14px;
  font-size:14px;
  font-weight:600;
  margin-bottom:15px;
  text-align:center;
}


/* ===== QUESTION ITEM ANIM ===== */

.question-item{
  position:relative;
  overflow:hidden;
}

.question-item::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  width:4px;
  height:100%;
  background:#2563eb;
}


/* DELETE BTN */

.delete-btn{
  position:absolute;
  top:10px;
  right:10px;

  background:#fee2e2;
  color:#b91c1c;
  border:none;

  padding:4px 8px;
  border-radius:8px;
  font-size:11px;

  cursor:pointer;
  transition:.2s;
}

.delete-btn:hover{
  background:#fecaca;
}


/* ===== EMPTY STATE ===== */

.empty-text{
  text-align:center;
  padding:25px 15px;

  color:#64748b;
  font-size:14px;
  font-weight:500;

  background:rgba(148,163,184,.08);
  border-radius:16px;

  margin-top:15px;

  animation:fadeIn .4s;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(8px)}
  to{opacity:1;transform:none}
}

</style>
</head>

<body>

<!-- HEADER -->
<header class="app-header">

<button class="back-btn" onclick="history.back()">
<i class="fa-solid fa-chevron-left"></i>
</button>

<span class="app-title">Soru Sor</span>

<span></span>

</header>


<div class="container">


    <div class="info-box">
  üí¨ ≈ûahin Ehliyet | Dilediƒüin Soruyu Sor  
  <br>
  <small>Ekibimiz sana en kƒ±sa s√ºrede cevap verir (Yoƒüunluk olursa cevaplar gecikebilir)</small>
</div>

<div class="quota-box">
  üìä Kalan Soru Hakkƒ±n: <b id="quotaText">2</b>
</div>


<!-- ASK -->
<div class="ask-card">

<div class="ask-title">‚ùìMerak Ettiƒüin Soruyu Yaz</div>

<div class="ask-desc">
Ehliyetle ilgili merak ettiklerini bize sorabilirsin.
</div>

<textarea id="qInput"
placeholder="√ñrnek: Direksiyon sƒ±navƒ±nda ka√ß hata yapƒ±labilir?"></textarea>

<div class="form-error" id="formError">
  ‚ùó Sorun en az 10 karakter olmalƒ±
</div>


<button onclick="sendQuestion()">
  G√∂nder
</button>


</div>

<div class="my-questions">

  <h3>üì© Sorduƒüum Sorular</h3>

  <div id="loadMyQuestions"></div>

</div>

<div id="emptyText" class="empty-text">
  üì≠ Hen√ºz soru sormadƒ±n.
</div>




<!-- FAQ -->
<div class="faq-card">

<div class="faq-title">üìå Sƒ±k√ßa Sorulan Sorular</div>

<div class="faq-item">

<div class="faq-q">
Ehliyet sƒ±navƒ± ka√ß soru?
<i class="fa-solid fa-chevron-down"></i>
</div>

<div class="faq-a">
Ehliyet sƒ±navƒ± toplam 50 sorudan olu≈üur ve en az 35 doƒüru yapman gerekir.
</div>

</div>


<div class="faq-item">

<div class="faq-q">
Ehliyet sƒ±navƒ± zor mu?
<i class="fa-solid fa-chevron-down"></i>
</div>

<div class="faq-a">
Hayƒ±r. D√ºzenli √ßalƒ±≈üan adaylar i√ßin
ehliyet sƒ±navƒ± olduk√ßa kolaydƒ±r.
</div>

</div>


<div class="faq-item">

<div class="faq-q">
Ka√ß puanla ge√ßilir?
<i class="fa-solid fa-chevron-down"></i>
</div>

<div class="faq-a">
Yazƒ±lƒ± sƒ±navdan en az 70 puan alman gerekir.
</div>

</div>

</div>

</div>


<!-- MODAL -->
<div class="modal" id="modal">

<div class="modal-box">

<i class="fa-solid fa-circle-check"></i>

<h3>G√∂nderildi</h3>

<p>
Sorun ba≈üarƒ±yla alƒ±ndƒ±.<br>
En kƒ±sa s√ºrede cevaplanacaktƒ±r. Burayƒ± sƒ±k sƒ±k kontrol edin. Sorduƒüum sorular kƒ±smƒ±nda sorunuzun cevabƒ±nƒ± g√∂receksiniz.
</p>

<button onclick="closeModal()">
Tamam
</button>

</div>

</div>


<div class="popup" id="popup">
  ‚úîÔ∏è Sorunuz g√∂nderildi.
</div>


<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  getDocs,
  query,
  orderBy,
  deleteDoc,
  doc
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";


    // USER ID (Her cihaza √∂zel)
let userId = localStorage.getItem("userId");

if(!userId){
  userId = "user_" + Date.now() + "_" + Math.random().toString(36).substr(2,9);
  localStorage.setItem("userId", userId);
}


// DARK MODE
if(localStorage.getItem("theme")==="true"){
  document.body.classList.add("dark");
}


// FIREBASE
const firebaseConfig = {
  apiKey: "AIzaSyADUE7MKvWQLKh3kU4RgF2Xn_CFGV0bXN4",
  authDomain: "sahinehliyetsoru.firebaseapp.com",
  projectId: "sahinehliyetsoru",
  storageBucket: "sahinehliyetsoru.appspot.com",
  messagingSenderId: "239399083549",
  appId: "1:239399083549:web:bc00cb1671802fccbb70f4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);



// ELEMENTS
const input = document.getElementById("qInput");
const listBox = document.getElementById("questionList");
const errorBox = document.getElementById("formError");
const popup = document.getElementById("popup");
const emptyText = document.getElementById("emptyText");


// POPUP
function showPopup(msg){

  popup.textContent = msg;
  popup.style.display="block";

  setTimeout(()=>{
    popup.style.display="none";
  },2000);
}


// SEND QUESTION
async function sendQuestion(){

  let text = qInput.value.trim();

  if(text.length < 10){
    errorBox.style.display="block";
    return;
  }

  errorBox.style.display="none";

  // Kota kontrol
  const snap = await getDocs(collection(db,"questions"));

  if(snap.size >= 2){
    alert("En fazla 2 soru sorabilirsin");
    return;
  }

  await addDoc(collection(db,"questions"),{
    question: text,
    answer: "",
    createdAt: Date.now()
  });

  qInput.value="";

  showPopup("‚úîÔ∏è Sorun g√∂nderildi");

  loadMyQuestions();
}


// LOAD QUESTIONS
async function loadMyQuestions(){

  listBox.innerHTML="";

  const q = query(
    collection(db,"questions"),
    orderBy("createdAt","desc")
  );

  const snap = await getDocs(q);

  if(snap.empty){
    document.getElementById("emptyText").style.display="block";
    return;
  }

  document.getElementById("emptyText").style.display="none";

  snap.forEach(docu=>{

    const d = docu.data();

    const div = document.createElement("div");
    div.className="question-item";

    div.innerHTML=`

      <button class="delete-btn"
        onclick="deleteQuestion('${docu.id}')">
        Sil
      </button>

      <p><b>Soru:</b> ${d.question}</p>

      ${
        d.answer
        ? `<div class="answer">${d.answer}</div>`
        : `<small>‚è≥ Bekleniyor</small>`
      }
    `;

    listBox.appendChild(div);
  });

  updateQuota();
}

    async function deleteQuestion(id){

  await deleteDoc(doc(db,"questions",id));

  loadMyQuestions();

  showPopup("Soru silindi üóëÔ∏è");
}

    async function updateQuota(){

  const snap = await getDocs(collection(db,"questions"));

  let active = 0;

  snap.forEach(d=>{
    if(!d.data().answer){
      active++;
    }
  });

  quotaText.textContent = MAX_QUOTA - active;
}



// FAQ
document.querySelectorAll(".faq-item").forEach(item=>{

  item.addEventListener("click",()=>{

    item.classList.toggle("active");

  });

});


// MODAL
function closeModal(){
  document.getElementById("modal").classList.remove("active");
}


// INIT
loadMyQuestions();

</script>


</body>
</html>




