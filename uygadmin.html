<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>

body{
  font-family:Arial;
  background:#f4f6fb;
  padding:20px;
}

.card{
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:12px;
  box-shadow:0 2px 8px rgba(0,0,0,.1);
}

textarea{
  width:100%;
  height:60px;
  margin-top:5px;
}

button{
  background:#2563eb;
  color:white;
  border:none;
  padding:6px 12px;
  border-radius:6px;
  cursor:pointer;
  margin-top:5px;
}

small{
  color:#555;
}

</style>
</head>

<body>

<h2>ðŸ“‹ Admin Panel</h2>

<div id="list"></div>


<script>

// ================= FIREBASE =================

const firebaseConfig = {
  apiKey: "AIzaSyADUE7MKvWQLKh3kU4RgF2Xn_CFGV0bXN4",
  authDomain: "sahinehliyetsoru.firebaseapp.com",
  projectId: "sahinehliyetsoru",
  storageBucket: "sahinehliyetsoru.appspot.com",
  messagingSenderId: "239399083549",
  appId: "1:239399083549:web:bc00cb1671802fccbb70f4"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();


// ================= LOAD =================

db.collection("questions")
.orderBy("time","desc")
.onSnapshot(snap=>{

  const box = document.getElementById("list");

  box.innerHTML="";

  snap.forEach(doc=>{

    const d = doc.data();

    box.innerHTML += `

      <div class="card">

        <b>Soru:</b> ${d.question}<br>

        <small>KullanÄ±cÄ±: ${d.userId}</small><br><br>

        <b>Cevap:</b> ${d.answer || "Yok"}

        <textarea id="a_${doc.id}"
        placeholder="Cevap yaz..."></textarea>

        <button onclick="reply('${doc.id}')">
          GÃ¶nder
        </button>

      </div>

    `;

  });

});


// ================= REPLY =================

async function reply(id){

  const val =
    document.getElementById("a_"+id).value.trim();

  if(!val) return;

  await db.collection("questions")
    .doc(id)
    .update({

      answer: val

    });

}

</script>

</body>
</html>
