<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  font-family:Arial;
  background:#f4f6fb;
  padding:20px;
}

.card{
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:12px;
  box-shadow:0 3px 10px rgba(0,0,0,.1);
}

textarea{
  width:100%;
  height:60px;
}

button{
  background:#2563eb;
  color:white;
  border:none;
  padding:6px 12px;
  border-radius:6px;
  cursor:pointer;
}
</style>
</head>

<body>

<h2>ðŸ“‹ Soru Paneli</h2>

<div id="list"></div>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyADUE7MKvWQLKh3kU4RgF2Xn_CFGV0bXN4",
  authDomain: "sahinehliyetsoru.firebaseapp.com",
  projectId: "sahinehliyetsoru",
  storageBucket: "sahinehliyetsoru.firebasestorage.app",
  messagingSenderId: "239399083549",
  appId: "1:239399083549:web:bc00cb1671802fccbb70f4"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();


function load(){

  db.collection("questions")
  .onSnapshot(snap=>{

    const box = document.getElementById("list");

    box.innerHTML = "";

    snap.forEach(doc=>{

      const d = doc.data();

      box.innerHTML += `

      <div class="card">

        <p><b>Soru:</b> ${d.question}</p>

        <p><b>Cevap:</b> ${d.answer || "Yok"}</p>

        <textarea id="a_${doc.id}"
        placeholder="Cevap yaz..."></textarea>

        <br><br>

        <button onclick="reply('${doc.id}')">
          Cevapla
        </button>

      </div>

      `;

    });

  });

}


function reply(id){

  const val =
    document.getElementById("a_"+id).value;

  if(!val.trim()) return;

  db.collection("questions")
  .doc(id)
  .update({
    answer: val
  });

}


load();

</script>

</body>
</html>

